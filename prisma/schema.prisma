generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("DATABASE_URL_UNPOOLED")
}

model Message {
  id              String   @id @default(cuid())
  fromPhone       String
  toPhone         String
  incomingMessage String
  aiReply         String?
  status          String   @default("pending")
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  callerType      String?
  callerName      String?
  tenantId        String?
}

model Property {
  id                 String   @id
  name               String
  description        String?
  street1            String?
  street2            String?
  city               String?
  state              String?
  zip                String?
  country            String?
  type               String?
  class              String?
  active             Boolean  @default(true)
  amenities          String[]
  petPolicySmallDogs String?
  petPolicyLargeDogs String?
  petPolicyCats      String?
  numActiveUnits     Int?
  rawData            Json?
  syncedAt           DateTime @default(now())
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
  units              Unit[]
}

model Unit {
  id          String   @id
  name        String
  propertyId  String
  street1     String?
  city        String?
  state       String?
  zip         String?
  beds        Int?
  baths       Float?
  size        Int?
  marketRent  Float?
  description String?
  amenities   String[]
  active      Boolean  @default(true)
  inEviction  Boolean  @default(false)
  rawData     Json?
  syncedAt    DateTime @default(now())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  property    Property @relation(fields: [propertyId], references: [id])
}

model People {
  id          String   @id
  firstName   String?
  lastName    String?
  email       String?
  phone       String?
  mobilePhone String?
  type        String?
  status      String?
  notes       String?
  rawData     Json?
  syncedAt    DateTime @default(now())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  leases      Lease[]
  tasks       Task[]

   @@map("People")
}

model Lease {
  id              String    @id
  tenantId        String?
  propertyId      String?
  unitId          String?
  status          String?
  startDate       DateTime?
  endDate         DateTime?
  monthlyRent     Float?
  securityDeposit Float?
  rentDueDay      Int?
  lateFee         Float?
  leaseType       String?
  renewalStatus   String?
  moveInDate      DateTime?
  moveOutDate     DateTime?
  rawData         Json?
  syncedAt        DateTime  @default(now())
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  tenant          People?   @relation(fields: [tenantId], references: [id])
}

model Task {
  id          String    @id
  tenantId    String?
  propertyId  String?
  unitId      String?
  type        String?
  title       String?
  description String?
  status      String?
  priority    String?
  dueDate     DateTime?
  completedAt DateTime?
  assignedTo  String?
  rawData     Json?
  syncedAt    DateTime  @default(now())
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  tenant          People?   @relation(fields: [tenantId], references: [id])
}

model playing_with_neon {
  id    Int    @id @default(autoincrement())
  name  String
  value Float? @db.Real
}
